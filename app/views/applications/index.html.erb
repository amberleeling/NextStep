<h2 class="text-[22px] font-bold mb-4 mt-4">Applications</h2>

<% if @applications.any? %>
  <% @applications.each do |application| %>
    <%= turbo_frame_tag application do %>
      <div class="application-card" id="application-<%= application.id %>" style="position: relative; margin-bottom: 20px; padding: 15px; border: 1px solid #eee; border-radius: 8px;">

        <!-- 編輯與刪除 icon -->
        <div class="card-actions">
          <%= link_to edit_application_path(application) do %>
            <i class="fas fa-pen"></i>
          <% end %>

          <%= link_to application_path(application), data: { turbo_method: "delete", turbo_confirm: "Are you sure?", turbo_frame: "_top" }, class: "delete-icon" do %>
            <i class="fas fa-trash"></i>
          <% end %>
        </div>

        <!-- 顯示內容 -->
        <div class="display-mode" id="display-<%= application.id %>">
          <h3><%= application.job.position %></h3>
          <p style="color: #666;"><%= application.job.company %></p>
          <p style="color: #888; font-size: 14px;">
            Status: <strong><%= application.status.capitalize %></strong> |
            Applied on: <%= application.date.strftime("%Y-%m-%d") %>
          </p>
        </div>
      </div>
    <% end %>
  <% end %>
<% end %>

<style>
  .container {
    padding: 20px;
    max-width: 600px;
    margin: 0 auto;
  }
  .card-actions {
  position: absolute;
  top: 12px;
  right: 12px;
  display: flex;
  gap: 10px;
}

.edit-icon i,
.delete-icon i {
  font-size: 14px;
  color: #999;
  cursor: pointer;
}

.edit-icon:hover i {
  color: #007bff;
}

.delete-icon:hover i {
  color: #ff4d4f;
}

</style>
