<h2 class="text-[22px] font-bold mb-4 mt-4">Application Tracker ðŸ¤ž</h2>

<div class="flex flex-col gap-4">


    <div class="bg-white p-6 rounded-lg shadow flex items-center gap-4">
      <div class="stats-icon">
        <div class="flex items-center justify-center w-16 h-16 rounded-full bg-red-500">
          <i class="fas fa-file-alt text-3xl text-white"></i>
        </div>
      </div>
      <div class="stats-content">
        <h2 class="stats-number text-3xl font-bold"><%= @total_applications %></h2>
        <p class="stats-label text-lg">Applications</p>
        <p class="stats-description text-sm text-gray-500">Total job applications submitted</p>
      </div>
    </div>

  <div class="grid grid-cols-3 gap-4">


    <!-- Acceptance Rate -->
    <div class="bg-white p-6 rounded-lg shadow flex flex-col items-center">
      <h3 class="text-lg font-bold text-center">Acceptance</h3>
      <div class="relative flex justify-center items-center h-36 w-36">
        <svg class="w-full h-full p-5" viewBox="0 0 36 36">
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#E5E7EB"
            stroke-width="3"
          />
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#45EDBD"
            stroke-width="3"
            stroke-dasharray="<%= @accepted_percentage %>, 100"
            class="progress-ring"
          />
        </svg>
        <span class="text-2xl font-bold text-gray-700 absolute"><%= @accepted_percentage %>%</span>
      </div>
    </div>

    <!-- Rejection Rate -->
    <div class="bg-white p-6 rounded-lg shadow flex flex-col items-center">
      <h3 class="text-lg font-bold text-center">Rejection</h3>
      <div class="relative flex justify-center items-center h-36 w-36">
        <svg class="w-full h-full p-5" viewBox="0 0 36 36">
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#E5E7EB"
            stroke-width="3"
          />
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#FF0000"
            stroke-width="3"
            stroke-dasharray="<%= @rejected_percentage %>, 100"
            class="progress-ring"
          />
        </svg>
        <span class="text-2xl font-bold text-gray-700 absolute"><%= @rejected_percentage %>%</span>
      </div>
    </div>

    <!-- Pending Rate -->
    <div class="bg-white p-6 rounded-lg shadow flex flex-col items-center">
      <h3 class="text-lg font-bold text-center">Pending</h3>
      <div class="relative flex justify-center items-center h-36 w-36">
        <svg class="w-full h-full p-5" viewBox="0 0 36 36">
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#E5E7EB"
            stroke-width="3"
          />
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#FFA500"
            stroke-width="3"
            stroke-dasharray="<%= @pending_percentage %>, 100"
            class="progress-ring"
          />
        </svg>
        <span class="text-2xl font-bold text-gray-700 absolute"><%= @pending_percentage %>%</span>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-2 gap-4">
    <!-- Monthly Applications -->
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-lg font-bold mb-4">Applications This Month</h3>
      <div class="overflow-x-auto">
        <table class="w-full table-auto">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-2 text-left">Date</th>
              <th class="px-4 py-2 text-left">Applications</th>
            </tr>
          </thead>
          <tbody>
            <% @monthly_applications.each do |date, count| %>
              <tr class="border-t">
                <td class="px-4 py-2"><%= date.strftime("%B %d") %></td>
                <td class="px-4 py-2"><%= count %></td>
              </tr>
            <% end %>
          </tbody>
          <tfoot class="bg-gray-50">
            <tr>
              <td class="px-4 py-2 font-bold">Total</td>
              <td class="px-4 py-2 font-bold"><%= @monthly_applications.values.sum %></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>

    <!-- Monthly Change -->
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-lg font-bold mb-4">Monthly Change</h3>
      <p class="text-sm text-gray-500 mb-2 flex items-center gap-2">
        <% if @monthly_change > 0 %>
          <i class="fas fa-arrow-up text-green-500"></i>
          <span class="text-green-600">+<%= @monthly_change %>% from last month</span>
        <% elsif @monthly_change < 0 %>
          <i class="fas fa-arrow-down text-red-500"></i>
          <span class="text-red-600"><%= @monthly_change %>% from last month</span>
        <% else %>
          <span class="text-gray-500">No change from last month</span>
        <% end %>
      </p>
    </div>

    <!-- Weekly Applications -->
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-lg font-bold mb-4">Applications This Week</h3>
      <p class="text-sm text-gray-500 mb-2 flex items-center gap-2">
        <% if @weekly_change > 0 %>
          <i class="fas fa-arrow-up text-green-500"></i>
          <span class="text-green-600">+<%= @weekly_change %>% from last week</span>
        <% elsif @weekly_change < 0 %>
          <i class="fas fa-arrow-down text-red-500"></i>
          <span class="text-red-600"><%= @weekly_change %>% from last week</span>
        <% else %>
          <span class="text-gray-500">No change from last week</span>
        <% end %>
      </p>
    </div>

    <!-- Applications by Position -->
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-lg font-bold mb-4">Applications by Position</h3>
      <div class="overflow-x-auto">
        <table class="w-full table-auto">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-2 text-left">Position</th>
              <th class="px-4 py-2 text-left">Count</th>
            </tr>
          </thead>
          <tbody>
            <% @applications_by_position.each do |position, count| %>
              <tr class="border-t">
                <td class="px-4 py-2"><%= position %></td>
                <td class="px-4 py-2"><%= count %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
