<h2 class="text-[22px] font-bold mb-4 mt-4">Application Tracker ðŸ¤ž</h2>

<div class="flex flex-col gap-4">


    <div class="bg-white p-6 rounded-lg shadow flex items-center gap-4">
      <div class="stats-icon">
        <div class="flex items-center justify-center w-16 h-16 rounded-full bg-red-500">
          <i class="fas fa-file-alt text-3xl text-white"></i>
        </div>
      </div>
      <div class="stats-content">
        <h3 class="stats-number text-2xl font-bold"><%= @total_applications %></h3>
        <p class="stats-label text-lg">Total Applications</p>
        <p class="stats-description text-sm text-gray-500">Total job applications submitted</p>
      </div>
    </div>

  <div class="grid grid-cols-3 gap-4">


    <!-- Acceptance Rate -->
    <div class="bg-white p-6 rounded-lg shadow flex flex-col items-center">
      <h3 class="text-lg font-bold text-center">Acceptance</h3>
      <div class="relative flex justify-center items-center h-36 w-36">
        <svg class="w-full h-full p-6" viewBox="0 0 36 36">
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#E5E7EB"
            stroke-width="3"
          />
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#45EDBD"
            stroke-width="3"
            stroke-dasharray="<%= @accepted_percentage %>, 100"
            class="progress-ring"
          />
        </svg>
        <span class="text-2xl font-bold text-gray-700 absolute"><%= @accepted_percentage %>%</span>
      </div>
    </div>

    <!-- Rejection Rate -->
    <div class="bg-white p-6 rounded-lg shadow flex flex-col items-center">
      <h3 class="text-lg font-bold text-center">Rejection</h3>
      <div class="relative flex justify-center items-center h-36 w-36">
        <svg class="w-full h-full p-6" viewBox="0 0 36 36">
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#E5E7EB"
            stroke-width="3"
          />
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#FF0000"
            stroke-width="3"
            stroke-dasharray="<%= @rejected_percentage %>, 100"
            class="progress-ring"
          />
        </svg>
        <span class="text-2xl font-bold text-gray-700 absolute"><%= @rejected_percentage %>%</span>
      </div>
    </div>

    <!-- Pending Rate -->
    <div class="bg-white p-6 rounded-lg shadow flex flex-col items-center">
      <h3 class="text-lg font-bold text-center">Pending</h3>
      <div class="relative flex justify-center items-center h-36 w-36">
        <svg class="w-full h-full p-6" viewBox="0 0 36 36">
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#E5E7EB"
            stroke-width="3"
          />
          <path
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
            fill="none"
            stroke="#FFA500"
            stroke-width="3"
            stroke-dasharray="<%= @pending_percentage %>, 100"
            class="progress-ring"
          />
        </svg>
        <span class="text-2xl font-bold text-gray-700 absolute"><%= @pending_percentage %>%</span>
      </div>
    </div>
  </div>

  <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-lg font-bold mb-4">Applications This Month</h3>
      <p class="text-sm text-gray-500 mb-2 flex items-center gap-2">
        <% if @monthly_change > 0 %>
          <div class="flex items-center gap-2">
            <i class="fas fa-arrow-up text-green-500"></i>
            <span class="text-green-600 font-semibold text-2xl">+<%= @monthly_change %>%</span>
            <span class="text-gray-500">from last month</span>
          </div>
        <% elsif @monthly_change < 0 %>
          <div class="flex items-center gap-2">
            <i class="fas fa-arrow-down text-red-500"></i>
            <span class="text-red-600 font-semibold text-2xl"><%= @monthly_change %>%</span>
            <span class="text-gray-500">from last month</span>
          </div>
        <% end %>

        <div class="flex items-center gap-2">
          <p class="text-2xl font-bold flex items-center gap-2"><%= @monthly_applications.values.sum %></p>
          <span class="text-gray-500">This month</span>
        </div>
      </p>
    </div>

    <!-- Weekly Applications -->
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-lg font-bold mb-4">Applications This Week</h3>
      <p class="text-sm text-gray-500 mb-2 flex items-center gap-2">
        <% if @weekly_change > 0 %>
          <div class="flex items-center gap-2">
            <i class="fas fa-arrow-up text-green-500"></i>
            <span class="text-green-600 font-semibold text-2xl">+<%= @weekly_change %>%</span>
            <span class="text-gray-500">from last week</span>
          </div>
        <% elsif @weekly_change < 0 %>
          <div class="flex items-center gap-2">
            <i class="fas fa-arrow-down text-red-500"></i>
            <span class="text-red-600 font-semibold text-2xl"><%= @weekly_change %>%</span>
            <span class="text-gray-500">from last week</span>
          </div>
        <% end %>

        <div class="flex items-center gap-2">
          <p class="text-2xl font-bold flex items-center gap-2"><%= @weekly_applications.values.sum %></p>
          <span class="text-gray-500">This week</span>
        </div>
      </p>
    </div>

    <!-- Applications by Position -->
    <div class="bg-white p-6 rounded-lg shadow">
      <h3 class="text-lg font-bold mb-4">Applications by Position</h3>
      <div class="overflow-x-auto">
        <table class="w-full table-auto">
            <tr>
              <th class="px-4 py-2 text-left">Position</th>
              <th class="px-4 py-2 text-center">Number</th>
            </tr>
          </thead>
          <tbody>
            <% @applications_by_position.each do |position, count| %>
              <tr class="border-t border-gray-300">
                <td class="px-4 py-2"><%= position %></td>
                <td class="px-4 py-2 text-center"><%= count %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
</div>
